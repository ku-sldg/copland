<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
        content="application/xhtml+xml; charset=UTF-8" />
  <title>bcb_sq_appraise.md</title>
  <style type="text/css">
    h1 { text-align: center }
    blockquote.block { font-size: 16pt }
    body { background: white; color: black; max-width: 48em }
  </style>
</head>

<body>

  <h1>bcb_sq_appraise.md</h1>

  <h2>Copland Source</h2>

  <blockquote class="block">
    <pre>
*bank:
  @client @bank [attest bank sys]
          -&gt; (appraise client bank +&lt;- prove client id)
    </pre>
  </blockquote>

  <h2>Abstract Syntax Tree</h2>

<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: AST Pages: 1 -->
<svg width="455pt" height="260pt"
 viewBox="0.00 0.00 455.14 260.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 256)">
<title>AST</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-256 451.14,-256 451.14,4 -4,4"/>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<ellipse fill="none" stroke="black" cx="62.39" cy="-18" rx="62.29" ry="18"/>
<text text-anchor="middle" x="62.39" y="-14.3" font-family="Times,serif" font-size="14.00">attest bank sys</text>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="103.39" cy="-90" rx="36.29" ry="18"/>
<text text-anchor="middle" x="103.39" y="-86.3" font-family="Times,serif" font-size="14.00">@bank</text>
</g>
<!-- n1&#45;&gt;n0 -->
<g id="edge1" class="edge">
<title>n1&#45;&gt;n0</title>
<path fill="none" stroke="black" d="M93.68,-72.41C88.85,-64.16 82.9,-54.01 77.49,-44.78"/>
<polygon fill="black" stroke="black" points="80.4,-42.82 72.33,-35.96 74.36,-46.35 80.4,-42.82"/>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="224.39" cy="-18" rx="81.49" ry="18"/>
<text text-anchor="middle" x="224.39" y="-14.3" font-family="Times,serif" font-size="14.00">appraise client bank</text>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="385.39" cy="-18" rx="61.99" ry="18"/>
<text text-anchor="middle" x="385.39" y="-14.3" font-family="Times,serif" font-size="14.00">prove client id</text>
</g>
<!-- n4 -->
<g id="node5" class="node">
<title>n4</title>
<ellipse fill="none" stroke="black" cx="224.39" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="224.39" y="-86.3" font-family="Times,serif" font-size="14.00">+&lt;&#45;</text>
</g>
<!-- n4&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n4&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M224.39,-71.7C224.39,-63.98 224.39,-54.71 224.39,-46.11"/>
<polygon fill="black" stroke="black" points="227.89,-46.1 224.39,-36.1 220.89,-46.1 227.89,-46.1"/>
</g>
<!-- n4&#45;&gt;n3 -->
<g id="edge3" class="edge">
<title>n4&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M246.44,-79.41C271.26,-68.62 312.16,-50.84 343.18,-37.35"/>
<polygon fill="black" stroke="black" points="344.69,-40.52 352.46,-33.32 341.89,-34.1 344.69,-40.52"/>
</g>
<!-- n5 -->
<g id="node6" class="node">
<title>n5</title>
<ellipse fill="none" stroke="black" cx="143.39" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="143.39" y="-158.3" font-family="Times,serif" font-size="14.00">&#45;&gt;</text>
</g>
<!-- n5&#45;&gt;n1 -->
<g id="edge4" class="edge">
<title>n5&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M134.12,-144.76C129.34,-136.4 123.4,-126.02 118.03,-116.61"/>
<polygon fill="black" stroke="black" points="120.9,-114.58 112.9,-107.63 114.82,-118.05 120.9,-114.58"/>
</g>
<!-- n5&#45;&gt;n4 -->
<g id="edge5" class="edge">
<title>n5&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M159.4,-147.17C171.16,-137.01 187.33,-123.03 200.6,-111.56"/>
<polygon fill="black" stroke="black" points="203.15,-113.99 208.42,-104.8 198.57,-108.69 203.15,-113.99"/>
</g>
<!-- n6 -->
<g id="node7" class="node">
<title>n6</title>
<ellipse fill="none" stroke="black" cx="143.39" cy="-234" rx="38.19" ry="18"/>
<text text-anchor="middle" x="143.39" y="-230.3" font-family="Times,serif" font-size="14.00">@client</text>
</g>
<!-- n6&#45;&gt;n5 -->
<g id="edge6" class="edge">
<title>n6&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M143.39,-215.7C143.39,-207.98 143.39,-198.71 143.39,-190.11"/>
<polygon fill="black" stroke="black" points="146.89,-190.1 143.39,-180.1 139.89,-190.1 146.89,-190.1"/>
</g>
</g>
</svg>

  <h2>Events and Evidence</h2>

<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: Copland Pages: 1 -->
<svg width="1178pt" height="826pt"
 viewBox="0.00 0.00 1177.97 826.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 822)">
<title>Copland</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-822 1173.97,-822 1173.97,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_bank</title>
<polygon fill="none" stroke="black" points="692,-370 692,-663 1148,-663 1148,-370 692,-370"/>
<text text-anchor="middle" x="1126.5" y="-647.8" font-family="Times,serif" font-size="14.00">bank</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_client</title>
<polygon fill="none" stroke="black" points="8,-8 8,-810 684,-810 684,-8 8,-8"/>
<text text-anchor="middle" x="660.5" y="-794.8" font-family="Times,serif" font-size="14.00">client</text>
</g>
<!-- n17 -->
<g id="node1" class="node">
<title>n17</title>
<polygon fill="none" stroke="black" points="676,-54 236,-54 236,-16 676,-16 676,-54"/>
<text text-anchor="middle" x="456" y="-38.8" font-family="Times,serif" font-size="14.00">s(m(msp(appraise, client, bank), client, m(msp(attest, bank, sys), bank, mt)),</text>
<text text-anchor="middle" x="456" y="-23.8" font-family="Times,serif" font-size="14.00"> &#160;m(msp(prove, client, id), client, mt))</text>
</g>
<!-- n18 -->
<g id="node2" class="node">
<title>n18</title>
<ellipse fill="none" stroke="black" cx="1008" cy="-470" rx="69.59" ry="18"/>
<text text-anchor="middle" x="1008" y="-466.3" font-family="Times,serif" font-size="14.00">bank: rpy(client)</text>
</g>
<!-- n17&#45;&gt;n18 -->
<g id="edge1" class="edge">
<title>n17&#45;&gt;n18</title>
<path fill="none" stroke="black" d="M676.41,-38.49C885.51,-47.02 1168,-77.35 1168,-179 1168,-325 1168,-325 1168,-325 1168,-366.32 1175.89,-384.63 1149,-416 1130.74,-437.31 1103.02,-450.06 1076.98,-457.69"/>
<polygon fill="black" stroke="black" points="1075.83,-454.38 1067.1,-460.37 1077.67,-461.13 1075.83,-454.38"/>
</g>
<!-- n19 -->
<g id="node9" class="node">
<title>n19</title>
<polygon fill="none" stroke="black" points="1140,-416 700,-416 700,-378 1140,-378 1140,-416"/>
<text text-anchor="middle" x="920" y="-400.8" font-family="Times,serif" font-size="14.00">s(m(msp(appraise, client, bank), client, m(msp(attest, bank, sys), bank, mt)),</text>
<text text-anchor="middle" x="920" y="-385.8" font-family="Times,serif" font-size="14.00"> &#160;m(msp(prove, client, id), client, mt))</text>
</g>
<!-- n18&#45;&gt;n19 -->
<g id="edge5" class="edge">
<title>n18&#45;&gt;n19</title>
<path fill="none" stroke="black" d="M987.59,-452.53C976.51,-443.59 962.6,-432.37 950.28,-422.43"/>
<polygon fill="black" stroke="black" points="952.44,-419.68 942.46,-416.12 948.05,-425.13 952.44,-419.68"/>
</g>
<!-- n6 -->
<g id="node3" class="node">
<title>n6</title>
<polygon fill="none" stroke="black" points="914,-488 702,-488 702,-452 914,-452 914,-488"/>
<text text-anchor="middle" x="808" y="-466.3" font-family="Times,serif" font-size="14.00">m(msp(attest, bank, sys), bank, mt)</text>
</g>
<!-- n7 -->
<g id="node4" class="node">
<title>n7</title>
<ellipse fill="none" stroke="black" cx="606" cy="-614" rx="69.59" ry="18"/>
<text text-anchor="middle" x="606" y="-610.3" font-family="Times,serif" font-size="14.00">client: rpy(bank)</text>
</g>
<!-- n6&#45;&gt;n7 -->
<g id="edge2" class="edge">
<title>n6&#45;&gt;n7</title>
<path fill="none" stroke="black" d="M759.66,-488.02C737.65,-496.96 711.92,-509.17 691,-524 665.38,-542.17 641.16,-568.82 625.17,-588.22"/>
<polygon fill="black" stroke="black" points="622.41,-586.06 618.85,-596.04 627.86,-590.47 622.41,-586.06"/>
</g>
<!-- n8 -->
<g id="node20" class="node">
<title>n8</title>
<polygon fill="none" stroke="black" points="590,-560 378,-560 378,-524 590,-524 590,-560"/>
<text text-anchor="middle" x="484" y="-538.3" font-family="Times,serif" font-size="14.00">m(msp(attest, bank, sys), bank, mt)</text>
</g>
<!-- n7&#45;&gt;n8 -->
<g id="edge21" class="edge">
<title>n7&#45;&gt;n8</title>
<path fill="none" stroke="black" d="M578.62,-597.29C562.23,-587.89 541.13,-575.78 523.01,-565.38"/>
<polygon fill="black" stroke="black" points="524.27,-562.07 513.85,-560.13 520.78,-568.14 524.27,-562.07"/>
</g>
<!-- n3 -->
<g id="node5" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="606" cy="-689" rx="69.59" ry="18"/>
<text text-anchor="middle" x="606" y="-685.3" font-family="Times,serif" font-size="14.00">client: req(bank)</text>
</g>
<!-- n3&#45;&gt;n7 -->
<g id="edge22" class="edge">
<title>n3&#45;&gt;n7</title>
<path fill="none" stroke="blue" d="M606,-670.7C606,-662.25 606,-651.87 606,-642.37"/>
<polygon fill="blue" stroke="blue" points="609.5,-642.18 606,-632.18 602.5,-642.18 609.5,-642.18"/>
</g>
<!-- n4 -->
<g id="node6" class="node">
<title>n4</title>
<polygon fill="none" stroke="black" points="754,-632 700,-632 700,-596 754,-596 754,-632"/>
<text text-anchor="middle" x="727" y="-610.3" font-family="Times,serif" font-size="14.00">mt</text>
</g>
<!-- n3&#45;&gt;n4 -->
<g id="edge3" class="edge">
<title>n3&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M658.41,-677.09C668.73,-673.58 679.11,-668.98 688,-663 696.73,-657.13 704.49,-648.72 710.74,-640.58"/>
<polygon fill="black" stroke="black" points="713.69,-642.47 716.69,-632.31 708.01,-638.38 713.69,-642.47"/>
</g>
<!-- n5 -->
<g id="node10" class="node">
<title>n5</title>
<ellipse fill="none" stroke="black" cx="810" cy="-542" rx="110.48" ry="18"/>
<text text-anchor="middle" x="810" y="-538.3" font-family="Times,serif" font-size="14.00">bank: msp(attest, bank, sys)</text>
</g>
<!-- n4&#45;&gt;n5 -->
<g id="edge8" class="edge">
<title>n4&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M747.52,-595.7C757.95,-586.9 770.78,-576.08 782.09,-566.54"/>
<polygon fill="black" stroke="black" points="784.62,-568.99 790.01,-559.86 780.1,-563.63 784.62,-568.99"/>
</g>
<!-- n1 -->
<g id="node7" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="1008" cy="-542" rx="69.59" ry="18"/>
<text text-anchor="middle" x="1008" y="-538.3" font-family="Times,serif" font-size="14.00">bank: req(client)</text>
</g>
<!-- n1&#45;&gt;n18 -->
<g id="edge6" class="edge">
<title>n1&#45;&gt;n18</title>
<path fill="none" stroke="blue" d="M1008,-523.7C1008,-515.98 1008,-506.71 1008,-498.11"/>
<polygon fill="blue" stroke="blue" points="1011.5,-498.1 1008,-488.1 1004.5,-498.1 1011.5,-498.1"/>
</g>
<!-- n2 -->
<g id="node8" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="676,-779 622,-779 622,-743 676,-743 676,-779"/>
<text text-anchor="middle" x="649" y="-757.3" font-family="Times,serif" font-size="14.00">mt</text>
</g>
<!-- n1&#45;&gt;n2 -->
<g id="edge4" class="edge">
<title>n1&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M1010.54,-560.08C1013.32,-585.74 1014.46,-634.26 989,-663 948.54,-708.68 765.84,-741.91 686.25,-754.48"/>
<polygon fill="black" stroke="black" points="685.52,-751.05 676.18,-756.05 686.59,-757.97 685.52,-751.05"/>
</g>
<!-- n2&#45;&gt;n3 -->
<g id="edge23" class="edge">
<title>n2&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M638.37,-742.7C633.37,-734.56 627.31,-724.69 621.79,-715.7"/>
<polygon fill="black" stroke="black" points="624.72,-713.79 616.51,-707.1 618.76,-717.46 624.72,-713.79"/>
</g>
<!-- n5&#45;&gt;n6 -->
<g id="edge7" class="edge">
<title>n5&#45;&gt;n6</title>
<path fill="none" stroke="black" d="M809.51,-523.7C809.29,-515.98 809.02,-506.71 808.77,-498.11"/>
<polygon fill="black" stroke="black" points="812.27,-498 808.49,-488.1 805.28,-498.2 812.27,-498"/>
</g>
<!-- n0 -->
<g id="node11" class="node">
<title>n0</title>
<polygon fill="none" stroke="black" points="980,-632 926,-632 926,-596 980,-596 980,-632"/>
<text text-anchor="middle" x="953" y="-610.3" font-family="Times,serif" font-size="14.00">mt</text>
</g>
<!-- n0&#45;&gt;n1 -->
<g id="edge9" class="edge">
<title>n0&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M966.6,-595.7C973.12,-587.39 981.07,-577.28 988.25,-568.14"/>
<polygon fill="black" stroke="black" points="991.13,-570.13 994.56,-560.1 985.63,-565.81 991.13,-570.13"/>
</g>
<!-- n16 -->
<g id="node12" class="node">
<title>n16</title>
<ellipse fill="none" stroke="black" cx="456" cy="-108" rx="48.99" ry="18"/>
<text text-anchor="middle" x="456" y="-104.3" font-family="Times,serif" font-size="14.00">client: join</text>
</g>
<!-- n16&#45;&gt;n17 -->
<g id="edge10" class="edge">
<title>n16&#45;&gt;n17</title>
<path fill="none" stroke="black" d="M456,-89.81C456,-82.11 456,-72.82 456,-64.15"/>
<polygon fill="black" stroke="black" points="459.5,-64.02 456,-54.02 452.5,-64.02 459.5,-64.02"/>
</g>
<!-- n15 -->
<g id="node13" class="node">
<title>n15</title>
<polygon fill="none" stroke="black" points="231.5,-198 16.5,-198 16.5,-162 231.5,-162 231.5,-198"/>
<text text-anchor="middle" x="124" y="-176.3" font-family="Times,serif" font-size="14.00">m(msp(prove, client, id), client, mt)</text>
</g>
<!-- n15&#45;&gt;n16 -->
<g id="edge11" class="edge">
<title>n15&#45;&gt;n16</title>
<path fill="none" stroke="black" d="M204.79,-161.97C267.18,-148.81 351.6,-131.01 404.94,-119.77"/>
<polygon fill="black" stroke="black" points="405.78,-123.16 414.85,-117.68 404.34,-116.32 405.78,-123.16"/>
</g>
<!-- n12 -->
<g id="node14" class="node">
<title>n12</title>
<polygon fill="none" stroke="black" points="676,-198 250,-198 250,-162 676,-162 676,-198"/>
<text text-anchor="middle" x="463" y="-176.3" font-family="Times,serif" font-size="14.00">m(msp(appraise, client, bank), client, m(msp(attest, bank, sys), bank, mt))</text>
</g>
<!-- n12&#45;&gt;n16 -->
<g id="edge12" class="edge">
<title>n12&#45;&gt;n16</title>
<path fill="none" stroke="black" d="M461.27,-161.7C460.5,-153.98 459.57,-144.71 458.71,-136.11"/>
<polygon fill="black" stroke="black" points="462.19,-135.71 457.71,-126.1 455.22,-136.4 462.19,-135.71"/>
</g>
<!-- n11 -->
<g id="node15" class="node">
<title>n11</title>
<ellipse fill="none" stroke="black" cx="463" cy="-324" rx="131.88" ry="18"/>
<text text-anchor="middle" x="463" y="-320.3" font-family="Times,serif" font-size="14.00">client: msp(appraise, client, bank)</text>
</g>
<!-- n11&#45;&gt;n12 -->
<g id="edge17" class="edge">
<title>n11&#45;&gt;n12</title>
<path fill="none" stroke="black" d="M463,-305.87C463,-281.67 463,-237.21 463,-208.39"/>
<polygon fill="black" stroke="black" points="466.5,-208.19 463,-198.19 459.5,-208.19 466.5,-208.19"/>
</g>
<!-- n14 -->
<g id="node16" class="node">
<title>n14</title>
<ellipse fill="none" stroke="black" cx="286" cy="-252" rx="112.38" ry="18"/>
<text text-anchor="middle" x="286" y="-248.3" font-family="Times,serif" font-size="14.00">client: msp(prove, client, id)</text>
</g>
<!-- n11&#45;&gt;n14 -->
<g id="edge13" class="edge">
<title>n11&#45;&gt;n14</title>
<path fill="none" stroke="red" d="M421.95,-306.76C396.19,-296.58 362.81,-283.38 335.57,-272.61"/>
<polygon fill="red" stroke="red" points="336.81,-269.33 326.22,-268.91 334.23,-275.84 336.81,-269.33"/>
</g>
<!-- n14&#45;&gt;n15 -->
<g id="edge14" class="edge">
<title>n14&#45;&gt;n15</title>
<path fill="none" stroke="black" d="M248.83,-234.94C226.32,-225.21 197.34,-212.69 172.97,-202.16"/>
<polygon fill="black" stroke="black" points="174.11,-198.84 163.54,-198.08 171.33,-205.26 174.11,-198.84"/>
</g>
<!-- n13 -->
<g id="node17" class="node">
<title>n13</title>
<polygon fill="none" stroke="black" points="313,-342 259,-342 259,-306 313,-306 313,-342"/>
<text text-anchor="middle" x="286" y="-320.3" font-family="Times,serif" font-size="14.00">mt</text>
</g>
<!-- n13&#45;&gt;n14 -->
<g id="edge15" class="edge">
<title>n13&#45;&gt;n14</title>
<path fill="none" stroke="black" d="M286,-305.7C286,-297.98 286,-288.71 286,-280.11"/>
<polygon fill="black" stroke="black" points="289.5,-280.1 286,-270.1 282.5,-280.1 289.5,-280.1"/>
</g>
<!-- n9 -->
<g id="node18" class="node">
<title>n9</title>
<ellipse fill="none" stroke="black" cx="463" cy="-470" rx="66.09" ry="18"/>
<text text-anchor="middle" x="463" y="-466.3" font-family="Times,serif" font-size="14.00">client: +&lt;&#45; split</text>
</g>
<!-- n9&#45;&gt;n13 -->
<g id="edge16" class="edge">
<title>n9&#45;&gt;n13</title>
<path fill="none" stroke="black" d="M421.06,-455.93C397.78,-447.22 369.31,-434.03 348,-416 326.71,-397.98 309.55,-370.95 298.73,-351.02"/>
<polygon fill="black" stroke="black" points="301.82,-349.38 294.07,-342.16 295.62,-352.64 301.82,-349.38"/>
</g>
<!-- n10 -->
<g id="node19" class="node">
<title>n10</title>
<polygon fill="none" stroke="black" points="569,-415 357,-415 357,-379 569,-379 569,-415"/>
<text text-anchor="middle" x="463" y="-393.3" font-family="Times,serif" font-size="14.00">m(msp(attest, bank, sys), bank, mt)</text>
</g>
<!-- n9&#45;&gt;n10 -->
<g id="edge19" class="edge">
<title>n9&#45;&gt;n10</title>
<path fill="none" stroke="black" d="M463,-451.81C463,-443.79 463,-434.05 463,-425.07"/>
<polygon fill="black" stroke="black" points="466.5,-425.03 463,-415.03 459.5,-425.03 466.5,-425.03"/>
</g>
<!-- n10&#45;&gt;n11 -->
<g id="edge18" class="edge">
<title>n10&#45;&gt;n11</title>
<path fill="none" stroke="black" d="M463,-378.81C463,-370.79 463,-361.05 463,-352.07"/>
<polygon fill="black" stroke="black" points="466.5,-352.03 463,-342.03 459.5,-352.03 466.5,-352.03"/>
</g>
<!-- n8&#45;&gt;n9 -->
<g id="edge20" class="edge">
<title>n8&#45;&gt;n9</title>
<path fill="none" stroke="black" d="M478.81,-523.7C476.47,-515.9 473.65,-506.51 471.05,-497.83"/>
<polygon fill="black" stroke="black" points="474.36,-496.68 468.13,-488.1 467.65,-498.69 474.36,-496.68"/>
</g>
</g>
</svg>

</body>
</html>
